<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Website Feedback - consumerfinance.gov</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  <link href="../css/overrides.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Website Feedback";
    var mkdocs_page_input_path = "website-feedback.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> consumerfinance.gov</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Introduction</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../installation/">Installation</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Running this Project</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../running-virtualenv/">Running in a Virtual Environment</a>
                </li>
                <li class="">
                    
    <a class="" href="../running-docker/">Running in Docker</a>
                </li>
                <li class="">
                    
    <a class="" href="../debugging-monitoring/">Debugging and Monitoring</a>
                </li>
                <li class="">
                    
    <a class="" href="../deployment/">Artifacts and Deployment</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Pages and Components</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../atomic-structure/">Atomic Structure and Design</a>
                </li>
                <li class="">
                    
    <a class="" href="../editing-components/">Creating and Editing Components</a>
                </li>
                <li class="">
                    
    <a class="" href="../debugging-templates/">Debugging Templates</a>
                </li>
                <li class="">
                    
    <a class="" href="../migrations/">Django and Wagtail Migrations</a>
                </li>
                <li class="">
                    
    <a class="" href="../forms-in-wagtail/">Forms in Wagtail Page Context</a>
                </li>
                <li class="">
                    
    <a class="" href="../wagtail-pages/">Wagtail Pages</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Supporting Features</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../caching/">Caching</a>
                </li>
                <li class="">
                    
    <a class="" href="../feature-flags/">Feature Flags</a>
                </li>
                <li class="">
                    
    <a class="" href="../search/">Search</a>
                </li>
                <li class="">
                    
    <a class="" href="../split-testing/">Split Testing</a>
                </li>
                <li class="">
                    
    <a class="" href="../translation/">Translation</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Testing</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../browser-acceptance-tests/">Browser/Acceptance Testing</a>
                </li>
                <li class="">
                    
    <a class="" href="../javascript-unit-tests/">JavaScript Unit Testing</a>
                </li>
                <li class="">
                    
    <a class="" href="../python-unit-tests/">Python Unit Testing</a>
                </li>
                <li class="">
                    
    <a class="" href="../functional-testing/">Functional Testing</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Contributing</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../branching-merging/">Branching and Merging</a>
                </li>
                <li class="">
                    
    <a class="" href="../contributing-docs/">Contributing to the Docs</a>
                </li>
                <li class="">
                    
    <a class="" href="../related-projects/">Related Projects</a>
                </li>
                <li class="">
                    
    <a class="" href="../development-tips/">Development Tips</a>
                </li>
                <li class="">
                    
    <a class="" href="../github-actions/">How We Use GitHub Actions</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">APIs and Data</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../ask-cfpb/">Ask CFPB</a>
                </li>
                <li class="">
                    
    <a class="" href="../consumer-complaint-database/">Consumer Complaints</a>
                </li>
                <li class="">
                    
    <a class="" href="../housing-counselor-tool/">Find a Housing Counselor Tool</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Website Feedback</a>
    <ul class="subnav">
            
    
        <ul>
        
            <li><a class="toctree-l4" href="#exporting-feedback-using-wagtail">Exporting feedback using Wagtail</a></li>
        
            <li><a class="toctree-l4" href="#exporting-feedback-from-the-command-line">Exporting feedback from the command line</a></li>
        
            <li><a class="toctree-l4" href="#querying-feedback-programmatically">Querying feedback programmatically</a></li>
        
        </ul>
    

    </ul>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">consumerfinance.gov</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>APIs and Data &raquo;</li>
        
      
    
    <li>Website Feedback</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/cfpb/consumerfinance.gov/edit/master/docs/website-feedback.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="website-feedback">Website feedback<a class="headerlink" href="#website-feedback" title="Permanent link">¶</a></h1>
<p>Website pages can be configured to display forms that solicit feedback from
visitors, for example asking whether or not page information was useful and
accurate.</p>
<p>User-submitted feedback is stored in the Django database. There are several
ways to access and export this data.</p>
<h2 id="exporting-feedback-using-wagtail">Exporting feedback using Wagtail<a class="headerlink" href="#exporting-feedback-using-wagtail" title="Permanent link">¶</a></h2>
<p>Users with appropriate permissions have access to an "Export feedback" tool
in Wagtail. This tool generates a ZIP file containing submitted feedback
between two user-specified dates.</p>
<p><img alt="Screenshot of the Wagtail tool for exporting feedback" src="../img/export-feedback.png" /></p>
<p>Feedback is automatically grouped into three segments, each stored as a CSV:</p>
<ul>
<li>Feedback submitted on Ask CFPB pages (both English and Spanish)</li>
<li>Feedback submitted on Buying a House pages</li>
<li>Feedback submitted on all other website pages</li>
</ul>
<p>In order to access this part of the Wagtail admin, users must be granted the
"Can export feedback from the Wagtail admin" permission. This can be enabled
or disabled for different Wagtail groups in the Groups area of the admin.</p>
<h2 id="exporting-feedback-from-the-command-line">Exporting feedback from the command line<a class="headerlink" href="#exporting-feedback-from-the-command-line" title="Permanent link">¶</a></h2>
<p>For more control over what feedback to export, the
<a href="https://github.com/cfpb/consumerfinance.gov/blob/main/cfgov/v1/management/commands/export_feedback.py"><code>export_feedback</code></a>
Django management command can be used. This command generates a CSV file
containing feedback for a specified set of pages and/or dates.</p>
<p>To export all website feedback for all time, use this command:</p>
<pre class="highlight"><code class="language-sh">cfgov/manage.py export_feedback --filename output.csv</code></pre>

<p>(Alternatively, exclude the <code>--filename</code> parameter to send the output to the
console.)</p>
<p>To export feedback for a specific Wagtail page and its descendants, provide its
slug. Specified pages must have slugs that are unique across the website.</p>
<pre class="highlight"><code class="language-sh">cfgov/manage.py export_feedback ask-cfpb --filename ask_cfpb.csv</code></pre>

<p>Specify multiple slugs to export feedback for multiple pages:</p>
<pre class="highlight"><code class="language-sh">cfgov/manage.py export_feedback ask-cfpb owning-a-home --filename ask_and_bah.csv</code></pre>

<p>To invert the selection, and export feedback for all pages <em>except</em> those
specified, use the <code>--exclude</code> parameter:</p>
<pre class="highlight"><code class="language-sh">cfgov/manage.py export_feedback --exclude ask-cfpb --filename everything_except_ask.csv</code></pre>

<p>To limit the exported feedback within a given date range, provide the
<code>--from-date</code> and/or the <code>--to-date</code> parameters. These parameters are
inclusive, meaning that feedback submitted on or between the dates is included
in the export.</p>
<pre class="highlight"><code class="language-sh">cfgov/manage.py export_feedback --from-date 2019-01-01 --to-date 2019-12-31 --filename 2019.csv</code></pre>

<h2 id="querying-feedback-programmatically">Querying feedback programmatically<a class="headerlink" href="#querying-feedback-programmatically" title="Permanent link">¶</a></h2>
<p>For even greater control, feedback can be queried from a Python shell using the
<a href="https://github.com/cfpb/consumerfinance.gov/blob/main/cfgov/v1/models/feedback.py"><code>Feedback</code></a>
Django model.</p>
<p>This model includes a
<a href="https://docs.djangoproject.com/en/1.11/topics/db/managers/#custom-managers">custom manager</a>
that exposes a <code>for_pages</code> method that can be used to efficiently query
feedback for one or more pages and all of their descendants:</p>
<pre class="highlight"><code class="language-py">feedback = Feedback.objects.for_pages([page1, page2])</code></pre>

<p>Like the management command, it can also be used to invert the selection:</p>
<pre class="highlight"><code class="language-py">feedback = Feedback.objects.for_pages([page], exclude=True)</code></pre>

<p>This method can also be combined in the usual way with other standard Django
queryset methods:</p>
<pre class="highlight"><code class="language-py">feedback = Feedback.objects.for_pages([page]).filter(language='es')</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../housing-counselor-tool/" class="btn btn-neutral" title="Find a Housing Counselor Tool"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/cfpb/consumerfinance.gov/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../housing-counselor-tool/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
